<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pac-Man ‚Äî Landmarks Edition</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { margin: 0; background: #000; color: #fff; font-family: sans-serif; text-align: center; }
    canvas { display: block; margin: 1rem auto; background: #111; border: 6px solid #fff; border-radius: 12px; }
    .controls { display: flex; justify-content: center; gap: 1rem; margin-top: 1rem; }
    .btn { font-size: 2rem; padding: 0.5rem 1rem; border: none; border-radius: 0.5rem; background: #333; color: #fff; }
    img { display: none; }
  </style>
</head>
<body>
  <h1>Pac-Man ‚Äî Landmarks Edition</h1>
  <canvas id="game" width="448" height="448"></canvas>
  <div class="controls">
    <button class="btn" onclick="setDir(0,-1)">‚¨ÜÔ∏è</button>
    <button class="btn" onclick="setDir(-1,0)">‚¨ÖÔ∏è</button>
    <button class="btn" onclick="setDir(1,0)">‚û°Ô∏è</button>
    <button class="btn" onclick="setDir(0,1)">‚¨áÔ∏è</button>
  </div>
  
<img id="olympiaturm" src="olympiaturm.jpg" hidden>
<img id="liberty" src="liberty.jpg" hidden>
<img id="chateau" src="chateau.jpg" hidden>
<audio id="waka" src="https://freesound.org/data/previews/341/341695_3248244-lq.mp3"></audio>
<audio id="powerup" src="https://freesound.org/data/previews/220/220173_4108850-lq.mp3"></audio>
<audio id="win" src="https://freesound.org/data/previews/276/276033_2738237-lq.mp3"></audio>

  <script>
    const TILE = 32;
    const ROWS = 14, COLS = 14;
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d");

    const imgs = {
      olympiaturm: document.getElementById("olympiaturm"),
      liberty: document.getElementById("liberty"),
      chateau: document.getElementById("chateau")
    };

    const sounds = {
      waka: document.getElementById("waka"),
      powerup: document.getElementById("powerup"),
      win: document.getElementById("win")
    };

    const TILES = { EMPTY: 0, WALL: 1, PELLET: 2, POWER: 3, GOAL: 4, MUNICH: 5, LIBERTY: 6 };

    const tileMap = [
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1],
      [1,5,2,0,2,0,2,0,2,0,2,6,0,1],
      [1,0,1,1,1,0,1,1,1,0,1,1,0,1],
      [1,2,1,0,1,0,1,0,1,0,1,0,2,1],
      [1,0,1,0,1,0,1,0,1,0,1,0,0,1],
      [1,2,1,0,1,0,1,0,1,0,1,2,0,1],
      [1,0,1,1,1,0,1,1,1,0,1,1,0,1],
      [1,2,0,0,0,0,0,0,0,0,0,0,2,1],
      [1,0,1,1,1,0,1,1,1,0,1,1,0,1],
      [1,2,1,3,1,0,1,0,1,0,1,0,2,1],
      [1,0,1,0,1,0,1,0,1,0,1,0,0,1],
      [1,2,1,0,1,0,1,0,1,0,1,2,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,4,1],
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1]
    ];

    const pac = { x: 1, y: 1, dir: {x: 0, y: 0} };
    const ghosts = [{ x: 7, y: 6, color: "#f00" }, { x: 8, y: 7, color: "#0ff" }];
    let goalReached = false;

    function drawTile(x, y, type) {
      switch (type) {
        case TILES.WALL:
          ctx.fillStyle = "#444";
          ctx.fillRect(x * TILE, y * TILE, TILE, TILE);
          break;
        case TILES.PELLET:
          ctx.fillStyle = "#FFD700";
          ctx.beginPath(); ctx.arc(x*TILE+TILE/2, y*TILE+TILE/2, 4, 0, 2*Math.PI); ctx.fill();
          break;
        case TILES.POWER:
          ctx.fillStyle = "#FF69B4";
          ctx.beginPath(); ctx.arc(x*TILE+TILE/2, y*TILE+TILE/2, 7, 0, 2*Math.PI); ctx.fill();
          break;
        case TILES.GOAL:
          ctx.drawImage(imgs.chateau, x*TILE, y*TILE, TILE, TILE);
          break;
        case TILES.MUNICH:
          ctx.drawImage(imgs.olympiaturm, x*TILE, y*TILE, TILE, TILE);
          break;
        case TILES.LIBERTY:
          ctx.drawImage(imgs.liberty, x*TILE, y*TILE, TILE, TILE);
          break;
      }
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      for (let y = 0; y < ROWS; y++) {
        for (let x = 0; x < COLS; x++) {
          drawTile(x, y, tileMap[y][x]);
        }
      }

      ghosts.forEach(g => {
        ctx.fillStyle = g.color;
        ctx.beginPath();
        ctx.arc(g.x * TILE + TILE/2, g.y * TILE + TILE/2, 12, 0, Math.PI * 2);
        ctx.fill();
      });

      ctx.fillStyle = "yellow";
      ctx.beginPath();
      if (pac.dir.x === 0 && pac.dir.y === 0)
        ctx.arc(pac.x*TILE+TILE/2, pac.y*TILE+TILE/2, 12, 0, 2*Math.PI);
      else {
        const angle = Math.atan2(pac.dir.y, pac.dir.x);
        ctx.moveTo(pac.x*TILE+TILE/2, pac.y*TILE+TILE/2);
        ctx.arc(pac.x*TILE+TILE/2, pac.y*TILE+TILE/2, 12, angle+0.3, angle-0.3, false);
      }
      ctx.fill();
    }

    function movePac() {
      const newX = pac.x + pac.dir.x;
      const newY = pac.y + pac.dir.y;
      if (tileMap[newY][newX] !== TILES.WALL) {
        pac.x = newX; pac.y = newY;
        if (tileMap[newY][newX] === TILES.PELLET) { sounds.waka.play(); tileMap[newY][newX] = TILES.EMPTY; }
        if (tileMap[newY][newX] === TILES.POWER) { sounds.powerup.play(); tileMap[newY][newX] = TILES.EMPTY; }
        if (tileMap[newY][newX] === TILES.GOAL) { goalReached = true; sounds.win.play(); }
      }
    }

    function gameLoop() {
      movePac(); draw();
      if (!goalReached) requestAnimationFrame(gameLoop);
      else {
        ctx.fillStyle = "#0f0";
        ctx.font = "bold 20px sans-serif";
        ctx.fillText("üéâ You reached Chateau Marmont!", 30, 224);
      }
    }

    function setDir(x, y) { pac.dir = {x:x, y:y}; }

    document.addEventListener("keydown", e => {
      if (e.key === "ArrowUp") setDir(0,-1);
      if (e.key === "ArrowDown") setDir(0,1);
      if (e.key === "ArrowLeft") setDir(-1,0);
      if (e.key === "ArrowRight") setDir(1,0);
    });

    requestAnimationFrame(gameLoop);
  </script>
</body>
</html>
